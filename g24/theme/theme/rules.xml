<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<notheme if="$ajax_load" /><!-- don't theme overlays -->
<notheme if-path="@@plone.app.debugtoolbar.interactive.response"/>
<notheme if-path="@@plone.app.debugtoolbar.interactive.tales"/>

<rules css:if-content="#visual-portal-wrapper">
  <theme href="++theme++g24new-theme/g24new/index.html" />

  <!-- HEAD -->
  <copy attributes="*" theme="/html" content="/html"/>

  <drop css:theme="link.dropme" />
  <drop css:theme="script.dropme" />
  <after theme-children="/html/head" css:content="html head link[type='text/css']" />
  <after theme-children="/html/body" content="/html/head/script" />

  <!--replace theme="/html/head" content="/html/head"/-->

  <!-- replace content="/html/head/meta[@name='viewport']">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1"/>
  </replace-->

  <!--replace content="/html/head/link[@rel='shortcut icon']">
    <link rel="icon" href="++theme++g24new-theme/g24new/icons/favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="++theme++g24new-theme/g24new/icons/favicon.png" type="image/png"/>
  </replace-->
  <!--replace content="/html/head/link[@rel='apple-touch-icon']">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="++theme++g24new-theme/g24new/icons/apple-touch-icon-114x114-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="++theme++g24new-theme/g24new/icons/apple-touch-icon-72x72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="++theme++g24new-theme/g24new/icons/apple-touch-icon-precomposed.png"/>
  </replace-->


  <!-- BODY -->
  <copy attributes="class dir" theme="/html/body" content="/html/body" />
  <!--replace theme-children="/html/body" content-children="/html/body"/-->
  <replace css:content-children="#content-core" css:theme-children="div.container-fluid div.span9" />


  <copy attributes="title href accesskey"
    css:content="#portal-logo"
    css:theme="#g24-logo a" />

  <!-- TODO: bring back in .searchSection -->
  <drop css:content="#portal-searchbox .searchSection"/>
  <drop css:content="#portal-advanced-search"/>
  <replace
    css:content="#portal-searchbox"
    css:theme-children="#g24-searchbox" />

  <replace
    css:content-children="ul#portal-globalnav"
    css:theme-children="#g24-menu ul.nav" />

  <rules css:if-content="#user-name">
    <copy attributes="href"
      css:content-children="a#user-name"
      css:theme-children="a#user-name" />
    <replace
      css:content-children="a#user-name"
      css:theme-children="a#user-name .username" />
    <replace
      css:content-children="#portal-personaltools-wrapper .actionMenuContent ul"
      css:theme-children="#g24-usermenu ul.dropdown-menu" />
  </rules>
  <rules css:if-content="#personaltools-login">
    <replace
      css:content-children="a#personaltools-login"
      css:theme-children="a#user-name" />
    <replace
      href="/login?ajax_load=1" method="document"
      css:content-children="#content-core"
      css:theme-children="#g24-usermenu ul.dropdown-menu" />
  </rules>

  <rules css:if-content="#toggle-online-users">
    <copy attributes="href"
      css:content-children="a#toggle-online-users"
      css:theme-children="a#toggle-online-users" />
    <replace
      css:content-children="#toggle-online-users"
      css:theme-children="#toggle-online-users" />
    <replace
      css:content-children="#online-users"
      css:theme-children="#online-users" />
  </rules>
  <rules css:if-not-content="#toggle-online-users">
    <drop css:theme="#g24-online-users" />
  </rules>

  <!-- debugtoolbar -->
  <!-- after css:theme-children="body"
         css:content="#debug-toolbar-trigger"/>
  <after css:theme-children="body"
         css:content="#debug-toolbar"/-->

</rules>
</rules>
